:root{
  --bg:#0b0f1a;
  --bg-2:#0f1628;
  --fg:#f2f6ff;
  --accent:#38d39f;
  --accent-2:#00a3ff;
  --warn:#ff9f1c;
  --bad:#ff4d6d;
  --good:#2ecc71;
  --muted:#8fa3bf;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--fg);
  background: radial-gradient(1200px 800px at 20% -10%, #15213e, transparent),
              radial-gradient(1000px 600px at 120% 10%, #1b2b57, transparent),
              var(--bg);
  /* Mobile optimizations */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
  /* Prevent scroll interference */
  overflow-x: hidden;
}

.screen{ display:none; height:100vh; width:100vw; padding:24px; overflow: hidden; }
.screen.active{ display:flex; flex-direction:column; align-items:center; justify-content:center; gap:24px }

.title h1{
  font-family: 'Bangers', cursive;
  letter-spacing:2px;
  font-size:64px;
  margin:0;
  text-shadow:0 6px 0 #0003, 0 0 36px #00a3ff55;
}

/* Mobile title adjustments */
@media (max-width: 768px) {
  .title h1 {
    font-size: 48px;
    letter-spacing: 1px;
  }
}

@media (max-width: 480px) {
  .title h1 {
    font-size: 36px;
    letter-spacing: 0.5px;
  }
}

.subtitle{ color:var(--muted); margin:8px 0 0 0; text-align:center }

.menu-buttons{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center }
.btn{
  appearance:none; border:none; background:linear-gradient(180deg, #243457, #14213d);
  color:var(--fg); padding:12px 18px; border-radius:12px; cursor:pointer; font-weight:600; box-shadow: 0 8px 24px #0005;
  transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
  /* Mobile touch improvements */
  min-height: 44px;
  min-width: 44px;
}
.btn:hover{ transform: translateY(-2px); box-shadow: 0 12px 28px #0007 }
.btn:active{ transform: translateY(0) scale(.98) }
.btn.primary{ background:linear-gradient(180deg, var(--accent), var(--accent-2)); color:#03131b }
.btn.small{ padding:8px 12px; font-size:14px; min-height: 36px; min-width: 36px }

.panel{
  background: #0f1b2f; border:1px solid #284071; border-radius:16px; padding:16px; width:min(560px, 90vw);
  box-shadow:0 12px 50px #0008;
}
.panel.hidden{ display:none }
.panel h2{ margin:0 0 8px 0 }
.panel ul{ margin:0 0 12px 20px }
.setting-row{ display:flex; align-items:center; gap:12px; margin:10px 0 }

.switch{ position:relative; display:inline-block; width:46px; height:24px }
.switch input{ display:none }
.switch .slider{ position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#2b3b66; border-radius:24px }
.switch .slider:before{ content:""; position:absolute; height:18px; width:18px; left:3px; top:3px; background:white; border-radius:50%; transition: transform .2s ease }
.switch input:checked + .slider:before{ transform: translateX(22px) }

.hud{ display:flex; align-items:center; justify-content:space-between; padding:16px 20px; backdrop-filter: blur(8px); background:#0b1222aa; border-bottom:1px solid #284071; gap: 0 24px; position: sticky; top: 0; z-index: 10; }
.hud .score, .hud .completed{ color:#cfe3ff }
.big-timer{ font-family:'Bangers', cursive; font-size:32px; letter-spacing:1px; text-align:center; color:#c1f5ff }
.accuracy{ font-size:13px; color:var(--muted); text-align:center; height:16px }
.gym-clock{ font-family: 'Bangers', cursive; font-size:20px; letter-spacing:1px; color:#a7ffcf; background:#0f1b2f; border:1px solid #284071; padding:6px 10px; border-radius:10px; margin-left:8px }
.hud-right{ display:flex; align-items:center; gap: 12px; margin-left: 8px }

/* Mobile HUD adjustments */
@media (max-width: 768px) {
  .hud {
    flex-direction: column;
    gap: 12px;
    padding: 12px 16px;
    position: relative; /* Remove sticky on mobile to prevent layout issues */
  }
  
  .hud-left, .hud-right {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  
  .big-timer {
    font-size: 28px;
    order: -1; /* Put timer at top on mobile */
  }
  
  .gym-clock {
    font-size: 18px;
    padding: 4px 8px;
  }
}

@media (max-width: 480px) {
  .hud {
    padding: 10px 12px;
    gap: 8px;
  }
  
  .big-timer {
    font-size: 24px;
  }
  
  .hud .score, .hud .completed {
    font-size: 14px;
  }
}

.gym{ 
  position:relative; 
  width:min(1100px, 92vw); 
  height:70vh; 
  margin:18px auto; 
  border-radius:18px;
  background:
    linear-gradient(180deg, #0f1628, #0b1222 30%, #0b1222),
    radial-gradient(400px 100px at 50% 102%, #0a1b2a, transparent);
  border:1px solid #2b3b66; 
  box-shadow: inset 0 0 50px #0008, 0 40px 80px #0006;
  overflow:hidden;
  /* Prevent scroll interference */
  touch-action: none;
}

/* Mobile gym adjustments */
@media (max-width: 768px) {
  .gym {
    height: 60vh;
    margin: 12px auto;
    border-radius: 12px;
    width: 95vw; /* Use more screen width on mobile */
  }
}

@media (max-width: 480px) {
  .gym {
    height: 55vh;
    margin: 8px auto;
    border-radius: 8px;
    width: 98vw; /* Use almost full width on small mobile */
  }
}

.equipment{ 
  position:absolute; 
  width:120px; 
  height:120px; 
  border-radius:16px; 
  display:flex; 
  align-items:center; 
  justify-content:center;
  background: linear-gradient(145deg, #1e2e52, #0e1b33); 
  border:1px solid #284071; 
  box-shadow: 0 10px 24px #0006;
  cursor:pointer; 
  user-select:none; 
  -webkit-user-select:none; 
  touch-action:none; 
  color:#def5ff; 
  text-align:center; 
  padding:8px;
  /* Mobile touch improvements */
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  /* Ensure equipment doesn't overlap */
  z-index: 5;
}

.equipment .name{ font-weight:800; letter-spacing:.3px; margin-top:4px }
.equipment .target{ font-size:12px; color:#97b6e3; margin-top:4px }
.equipment .high-score{ font-size:11px; color:var(--accent); margin-top:2px; font-weight:600; text-shadow: 0 0 8px var(--accent); }
.equipment:hover{ outline:2px solid #00a3ff88 }
.equipment.held{ outline:3px solid var(--accent); transform: translateY(-2px) scale(1.05); box-shadow: 0 18px 30px #0008; z-index: 10; }
.equipment.done{ background: linear-gradient(145deg, #1d3f3a, #0e2a24); border-color:#0a7a4a; z-index: 1; }
.equipment.disabled{ opacity:.5; pointer-events:none }

/* Equipment SVG graphics */
.equipment .graphic {
  width: 48px;
  height: 48px;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.equipment .graphic svg {
  width: 100%;
  height: 100%;
  color: currentColor;
}

/* Mobile equipment adjustments */
@media (max-width: 700px){
  .equipment{ 
    width:100px; 
    height:100px; 
    padding: 6px;
    border-radius: 12px;
  }
  
  .equipment .graphic {
    width: 40px;
    height: 40px;
  }
  
  .equipment .name {
    font-size: 12px;
    margin-top: 2px;
  }
  
  .equipment .target {
    font-size: 10px;
    margin-top: 2px;
  }
  
  .equipment .high-score {
    font-size: 9px;
    margin-top: 1px;
  }
}

@media (max-width: 480px) {
  .equipment {
    width: 90px;
    height: 90px;
    padding: 4px;
    border-radius: 8px;
  }
  
  .equipment .graphic {
    width: 36px;
    height: 36px;
  }
  
  .equipment .name {
    font-size: 11px;
  }
  
  .equipment .target {
    font-size: 9px;
  }
  
  .equipment .high-score {
    font-size: 8px;
  }
}

.progress-ring{ 
  position:absolute; 
  inset: -8px; 
  border-radius:18px; 
  pointer-events:none; 
  z-index:0;
  background: conic-gradient(var(--accent) var(--deg), #273a63 0);
  -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 6px), #fff 0);
          mask: radial-gradient(farthest-side, #0000 calc(100% - 6px), #fff 0);
  border:1px solid #284071;
}
.progress-ring.fill{ box-shadow: 0 0 16px var(--accent-2) inset }

.equipment .content{ position:relative; z-index:1 }

.overlay{ position:fixed; inset:0; background:#020713c0; display:flex; align-items:center; justify-content:center; z-index:20 }
.overlay.hidden{ display:none }
.card{ background:#0f1b2f; border:1px solid #284071; border-radius:18px; box-shadow:0 20px 60px #000a; padding:20px; width:min(520px, 92vw) }
.card h2{ margin:0 0 12px 0 }

/* Mobile overlay adjustments */
@media (max-width: 480px) {
  .card {
    padding: 16px;
    border-radius: 12px;
  }
  
  .card h2 {
    font-size: 18px;
    margin-bottom: 8px;
  }
}

.toast{ position:fixed; bottom:16px; left:50%; transform: translateX(-50%); background:#0f1b2f; border:1px solid #3a507f; color:#e3f0ff; padding:10px 14px; border-radius:12px; box-shadow:0 12px 24px #0008; z-index:40; max-width: 90vw; }
.toast.hidden{ display:none }

/* Toast mood variations */
.toast.good {
  border-color: var(--good);
  background: #0f1b2f;
}

.toast.bad {
  border-color: var(--bad);
  background: #0f1b2f;
}

.toast.info {
  border-color: var(--accent-2);
  background: #0f1b2f;
}

/* High contrast mode */
.high-contrast body, .high-contrast .gym{ filter: contrast(1.2) }

/* Additional mobile optimizations */
@media (max-width: 768px) {
  .screen {
    padding: 16px;
  }
  
  .menu-buttons {
    gap: 8px;
  }
  
  .btn {
    padding: 10px 16px;
    font-size: 14px;
  }
  
  .panel {
    padding: 14px;
    border-radius: 12px;
  }
  
  .toast {
    bottom: 12px;
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 14px;
  }
}

@media (max-width: 480px) {
  .screen {
    padding: 12px;
  }
  
  .menu-buttons {
    gap: 6px;
  }
  
  .btn {
    padding: 8px 14px;
    font-size: 13px;
  }
  
  .panel {
    padding: 12px;
    border-radius: 8px;
  }
  
  .toast {
    bottom: 8px;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 13px;
  }
}

/* Landscape mode adjustments for mobile */
@media (max-height: 500px) and (orientation: landscape) {
  .screen {
    padding: 8px;
  }
  
  .title h1 {
    font-size: 32px;
    margin-bottom: 4px;
  }
  
  .subtitle {
    font-size: 12px;
    margin: 4px 0;
  }
  
  .gym {
    height: 50vh;
    margin: 8px auto;
  }
  
  .hud {
    padding: 8px 12px;
    gap: 8px;
  }
  
  .big-timer {
    font-size: 20px;
  }
}

/* Prevent text selection and improve touch */
* {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Ensure equipment positioning is stable */
.equipment {
  will-change: transform;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* Prevent scroll on mobile when touching game area */
.gym {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Better touch targets for mobile */
@media (max-width: 768px) {
  .btn, .equipment {
    min-height: 44px;
    min-width: 44px;
  }
  
  .equipment {
    touch-action: manipulation;
  }
}


